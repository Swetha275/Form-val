<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Form Submission</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
        .container{
            box-shadow: 5px 10px 18px #888888;
    }
    .form-group{
        margin-top: 30px;
        margin-bottom: 30px;
        padding: 10px;
    }
    .btnclass{
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 40px;
    }
   
    </style>
  </head>
  <body style="background-color: #F8BB7C;">
    <div class="container" style="background-color: #ffffff;margin-top: 10px">
      <h1>Form Submission-Javascript Express JS WITH MYSQL Database</h1>
      <form action="/" method="POST">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input type="text" class="form-control" id="firstName" aria-describedby="emailHelp" placeholder="Enter first name" name="first_name">
        </div>
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input type="text" class="form-control" id="lastName" aria-describedby="emailHelp" placeholder="Enter last name" name="last_name">
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1">Email address</label>
          <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="email" placeholder="Enter email">
        </div>
        <div class="btnclass">
            <button type="button" class="btn btn-primary" onClick="onit()">Submit</button>
          </div>
        
      </form>
      <p id="demo"></p>
      <script>
        function onit() {
          
          const  fname = document.getElementById("firstName").value;
          const  lname = document.getElementById("lastName").value;
          const  email = document.getElementById("exampleInputEmail1").value;

          var regName = /^[a-zA-Z]+$/;

          
           var regEmail = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
          
          if(!regName.test(fname)){
               alert('Invalid first name given.');
               document.getElementById('firstName').focus();
               return false;  
          }
          if(!regName.test(lname)){
            alert('Invalid last name given.');
            document.getElementById('lastName').focus();
            return false;  
       }
       if(!regEmail.test(email)){
        alert('Invalid email given.');
        document.getElementById('email').focus();
        return false;  
   }
          if (fname==null || fname=="" || lname==null || lname=="" || email==null || email==""){  
            alert("Details can't be empty");  
            return false;  
          }
          console.log(fname,lname,email,"podaaaaaaaaaaaaaaa");
          document.getElementById("demo").innerHTML = " Thank you!" + " " + document.getElementById("firstName").value +" Your response has been recorded. Submit another response? ";
          document.getElementById("firstName").value = '';
          document.getElementById("lastName").value = '';
          document.getElementById("exampleInputEmail1").value = '';
          fetch('/', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({  fname,lname , email })
        })
           .then(response => response.json())
           .then(response => console.log(JSON.stringify(response)))
        }
        </script>
  </body>
</html>